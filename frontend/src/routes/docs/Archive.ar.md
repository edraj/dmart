## أرشيف (Archive)

---

هذا البرنامج النصي مصمم لأرشفة السجلات من مساحة فرعية ومخطط محددين داخل نظام إدارة البيانات.

**الوظيفة**

- ينقل ملفات الحمولة والمجلدات الفرعية للبيانات التعريفية المرتبطة بها من موقع التخزين النشط إلى مجلد الأرشيف.
- يحذف مستندات الحمولة والبيانات التعريفية المقابلة من قاعدة بيانات Redis.

**المعاملات**

- `space` (str): اسم المساحة التي تحتوي على السجلات المراد أرشفتها.
- `subpath` (str): المسار الفرعي داخل المساحة المستهدف.
- `schema` (str, اختياري): اسم المخطط المراد أرشفته. يفترض "meta" إذا لم يتم توفيره. في هذه الحالة ، سيتم أرشفة جميع المخططات الموجودة ضمن المسار الفرعي.
- `olderthan` (int): عدد الأيام التي تزيد عن السجلات التي سيتم أرشفتها ، استنادًا إلى ختم الوقت `updated_at`.

**كيفية الاستخدام**

1. احفظ البرنامج النصي باسم `archive.py`.
2. تأكد من أن البرنامج النصي لديه أذونات قابلة للتنفيذ: `chmod +x archive.py`
3. قم بتشغيل البرنامج النصي مع المعاملات المرغوبة:


```
./archive.py <space> <subpath> [<schema>] <olderthan>

```

**مثال**

لأرشفة جميع السجلات التي يزيد عمرها عن 30 يومًا من المساحة "finance" في المسار الفرعي "reports"، قم بتشغيل:


```
./archive.py finance reports olderthan=30

```